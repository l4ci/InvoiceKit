function init_date(){var t=new Date,e=t.getMonth()+1,a=t.getDate();10>e&&(e="0"+e),10>a&&(a="0"+a);var n=a+"."+e+"."+t.getFullYear().toString().substr(2,2),o=new Date(t.getTime()+12096e5),e=o.getMonth()+1,a=o.getDate();10>e&&(e="0"+e),10>a&&(a="0"+a);var i=a+"."+e+"."+o.getFullYear().toString().substr(2,2);$(".datePicker").val(n),$(".twoweeks").val(i)}function calculate(){var t=0,e=0;console.log("CALCULATING - Tax Rate:"+TAX_RATE),$(".invoicelist-body tbody tr").each(function(){var a=$(this),n=a.find(".rate input").val(),o=a.find(".amount input").val(),i=n*o,l=i/(TAX_RATE+100)*TAX_RATE;t+=i,e+=l,a.find(".sum").text(i.toFixed(2)),a.find(".tax").text(l.toFixed(2))}),$("#total_price").text(t.toFixed(2)),$("#total_tax").text(e.toFixed(2))}var TAX_RATE=parseFloat($("#config_tax_rate").val()),TAX_SETTING=!1;$("body").addClass("hidetax hidenote hidedate");var newRow='<tr><td><a class="control removeRow" href="#">x</a><span contenteditable>Leistung</span></td><td><span contenteditable>Beschreibung</span></td><td class="daterelated"><span contenteditable>Datum</span></td><td class="amount"><input type="text" value="1"/></td><td class="rate"><input type="text" value="60" /></td><td class="tax taxrelated"></td><td class="sum"></td></tr>';$(".invoicelist-body").on("keyup","input",function(){calculate()}),$(".newRow").on("click",function(t){$(".invoicelist-body tbody").append(newRow),t.preventDefault(),calculate()}),$("body").on("click",".removeRow",function(t){$(this).closest("tr").remove(),t.preventDefault(),calculate()}),$("#config_note").on("change",function(){$("body").toggleClass("shownote hidenote")}),$("#config_tax").on("change",function(){TAX_SETTING=!TAX_SETTING,$("body").toggleClass("showtax hidetax")}),$("#config_tax_rate").on("keyup",function(){TAX_RATE=parseFloat($(this).val()),(0>TAX_RATE||TAX_RATE>100)&&(TAX_RATE=0),console.log("Changed tax rate to: "+TAX_RATE),calculate()}),$("#config_date").on("change",function(){$("body").toggleClass("hidedate showdate")}),init_date(),calculate();